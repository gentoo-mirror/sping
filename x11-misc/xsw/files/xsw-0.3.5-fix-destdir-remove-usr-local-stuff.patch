From 570759883e575d3294d614b625260d98cedcd2a8 Mon Sep 17 00:00:00 2001
From: Sebastian Pipping <sebastian@pipping.org>
Date: Sun, 9 Aug 2009 01:56:16 +0200
Subject: [PATCH] Fix Destdir, remove /usr/local stuff

---
 data/Makefile.am |    4 ++--
 src/Makefile.am  |   12 ++++++------
 2 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/data/Makefile.am b/data/Makefile.am
index 53dbe14..152bb32 100644
--- a/data/Makefile.am
+++ b/data/Makefile.am
@@ -6,8 +6,8 @@ EXTRA_DIST = install-fonts VeraBd.ttf VeraSeBd.ttf VeraMono.ttf
 
 # Install fonts, if they're not installed
 install-data-hook:
-	./install-fonts $(datadir)
+	./install-fonts "$(DESTDIR)$(datadir)"
 
 # Uninstall fonts
 uninstall-hook:
-	rm -rf $(datadir)/xsw/*.ttf
+	rm -rf "$(DESTDIR)$(datadir)"/xsw/*.ttf
diff --git a/src/Makefile.am b/src/Makefile.am
index 38996a4..fc4e65b 100644
--- a/src/Makefile.am
+++ b/src/Makefile.am
@@ -10,17 +10,17 @@ dist_bin_SCRIPTS=xsw2pdf xsw2png xsw2jpeg
 xsw_SOURCES=xsw.c options.c file.c presentation.c slide.c cmd_text.c cmd_img.c list.c presenter.c execute.c color.c \
 	          options.h file.h presentation.h slide.h cmd_text.h cmd_img.h list.h presenter.h execute.h color.h \
 		  parser.y lexer.l
-xsw_LDADD=$(SDL_LIBS) -L/usr/local/lib
-xsw_CFLAGS=$(SDL_CFLAGS) -I/usr/local/include/SDL -Wall -Wextra -DUSE_SDL -DDATADIR=\""$(datadir)/xsw/"\" -DVERSION=\"$(VERSION)\"
+xsw_LDADD=$(SDL_LIBS)
+xsw_CFLAGS=$(SDL_CFLAGS) -Wall -Wextra -DUSE_SDL -DDATADIR=\""$(DESTDIR)$(datadir)/xsw/"\" -DVERSION=\"$(VERSION)\"
 
 xswconv_SOURCES=xswconv.c file.c presentation.c slide.c cmd_text.c cmd_img.c list.c presenter.c execute.c color.c \
 	                  file.h presentation.h slide.h cmd_text.h cmd_img.h list.h presenter.h execute.h color.h \
 		          parser.y lexer.l
-xswconv_LDADD=$(SDL_LIBS) -L/usr/local/lib
-xswconv_CFLAGS=$(SDL_CFLAGS) -I/usr/local/include/SDL -Wall -Wextra -DUSE_SDL -DDATADIR=\""$(datadir)/xsw/"\" -DVERSION=\"$(VERSION)\"
+xswconv_LDADD=$(SDL_LIBS)
+xswconv_CFLAGS=$(SDL_CFLAGS) -Wall -Wextra -DUSE_SDL -DDATADIR=\""$(DESTDIR)$(datadir)/xsw/"\" -DVERSION=\"$(VERSION)\"
 
 #xsw2html_SOURCES=x2h.c x2h_options.c x2h_template.c file.c presentation.c slide.c cmd_text.c cmd_img.c list.c presenter.c execute.c color.c util.c \
 #		       x2h_options.h x2h_template.h file.h presentation.h slide.h cmd_text.h cmd_img.h list.h presenter.h execute.h color.h util.h \
 #		       parser.y lexer.l
-#xsw2html_LDADD=$(SDL_LIBS) -L/usr/local/lib
-#xsw2html_CFLAGS=$(SDL_CFLAGS) -I/usr/local/include/SDL -Wall -Wextra -DUSE_SDL -DDATADIR=\""$(datadir)/xsw/"\" -DVERSION=\"$(VERSION)\"
+#xsw2html_LDADD=$(SDL_LIBS)
+#xsw2html_CFLAGS=$(SDL_CFLAGS) -Wall -Wextra -DUSE_SDL -DDATADIR=\""$(DESTDIR)$(datadir)/xsw/"\" -DVERSION=\"$(VERSION)\"
-- 
1.6.4.rc0.17.gd9eb0.dirty

