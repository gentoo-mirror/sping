From eab1929e9f95e799ef8667896d1320d4348c4fae Mon Sep 17 00:00:00 2001
From: Sebastian Pipping <sebastian@pipping.org>
Date: Tue, 13 Jul 2010 21:33:54 +0200
Subject: [PATCH] Remove -Werror for downstreams

---
 config/Rules.am     |    2 +-
 config/spl-build.m4 |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/config/Rules.am b/config/Rules.am
index 7b72770..06eb314 100644
--- a/config/Rules.am
+++ b/config/Rules.am
@@ -9,5 +9,5 @@
 DEFAULT_INCLUDES = -include ${top_srcdir}/spl_config.h
 
 AM_LIBTOOLFLAGS = --silent
-AM_CFLAGS  = -Wall -Wstrict-prototypes -Werror -Wshadow
+AM_CFLAGS  = -Wall -Wstrict-prototypes -Wshadow
 AM_CFLAGS += -D__USE_LARGEFILE64
diff --git a/config/spl-build.m4 b/config/spl-build.m4
index a0fdb3e..a182da4 100644
--- a/config/spl-build.m4
+++ b/config/spl-build.m4
@@ -12,7 +12,7 @@ AC_DEFUN([SPL_AC_CONFIG_KERNEL], [
 	dnl # -Wall -fno-strict-aliasing -Wstrict-prototypes and other
 	dnl # compiler options are added by the kernel build system.
 	abs_srcdir=`readlink -f ${srcdir}`
-	KERNELCPPFLAGS="$KERNELCPPFLAGS -Wstrict-prototypes -Werror"
+	KERNELCPPFLAGS="$KERNELCPPFLAGS -Wstrict-prototypes"
 	KERNELCPPFLAGS="$KERNELCPPFLAGS -I${abs_srcdir}/include"
 	KERNELCPPFLAGS="$KERNELCPPFLAGS -include ${abs_srcdir}/spl_config.h"
 
@@ -677,7 +677,7 @@ dnl #
 AC_DEFUN([SPL_AC_5ARGS_DEVICE_CREATE], [
 	AC_MSG_CHECKING([whether device_create() wants 5 args])
 	tmp_flags="$EXTRA_KCFLAGS"
-	EXTRA_KCFLAGS="-Werror"
+	EXTRA_KCFLAGS=""
 	SPL_LINUX_TRY_COMPILE([
 		#include <linux/device.h>
 	],[
-- 
1.7.0.1.61.gdc05d.dirty

